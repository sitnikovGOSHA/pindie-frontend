exports.id=919,exports.ids=[919],exports.modules={8201:(e,s,t)=>{Promise.resolve().then(t.bind(t,2680))},944:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},2680:(e,s,t)=>{"use strict";t.r(s),t.d(s,{App:()=>k});var l=t(5344),r=t(3729),o=t(708),i=t.n(o),a=t(8125),n=t.n(a);let _=e=>l.jsx("div",{className:`${n().overlay} ${e.isOpened&&n()["overlay_is-opened"]}`,onClick:()=>e.close()});var c=t(2851),m=t.n(c);let u=e=>(0,l.jsxs)("div",{className:`${m().popup} ${e.isOpened&&m()["popup_is-opened"]}`,children:[l.jsx("button",{className:m().close,onClick:()=>e.close(),children:l.jsx("svg",{className:m()["close-icon"],xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 25",children:l.jsx("path",{fill:"#7E8292",d:"M15.3321 18.34c.04.0667.06.1533.06.26 0 .0933-.0467.1867-.14.28-.08.08-.18.12-.3.12h-4.5c-.36 0-.63332-.1533-.81999-.46l-1.74-2.68-1.66 2.68c-.18667.3067-.46.46-.82.46h-4.36c-.120001 0-.226667-.04-.320001-.12-.08-.0933-.12-.1867-.12-.28 0-.1067.02-.1933.06-.26l4.200001-6.5-3.78-6.18c-.04-.08-.06-.16667-.06-.26s.04-.18.12-.26c.09333-.09333.2-.14.32-.14h4.34c.37333 0 .65333.16667.84.5l1.4 2.44 1.52-2.44c.18667-.33333.46669-.5.83999-.5h4.14c.12 0 .22.04667.3.14.0933.08.14.17333.14.28 0 .09333-.02.17333-.06.24l-3.86 6.12 4.26 6.56Z"})})}),l.jsx("div",{className:m().content,children:e.children})]});var d=t(2796),h=t(783),p=t.n(h),f=t(2254),x=t(4402);let j=()=>{let[e,s]=(0,r.useState)(!1),t=(0,x.o)(),o=()=>{s(!1)},a=(0,f.usePathname)();return(0,l.jsxs)("header",{className:i().header,children:["/"===a?l.jsx("span",{className:i().logo,children:l.jsx("img",{className:i().logo__image,src:"/images/logo.svg",alt:"Логотип Pindie"})}):l.jsx(p(),{href:"/",className:i().logo,children:l.jsx("img",{className:i().logo__image,src:"/images/logo.svg",alt:"Логотип Pindie"})}),(0,l.jsxs)("nav",{className:i().menu,children:[(0,l.jsxs)("ul",{className:i().menu__list,children:[l.jsx("li",{className:i().menu__item,children:l.jsx(p(),{href:"/new",className:`${i().menu__link} ${"/new"===a&&i().menu__link_active}`,children:"Новинки"})}),l.jsx("li",{className:i().menu__item,children:l.jsx(p(),{href:"/popular",className:`${i().menu__link} ${"/popular"===a&&i().menu__link_active}`,children:"Популярные"})}),l.jsx("li",{className:i().menu__item,children:l.jsx(p(),{href:"/shooters",className:`${i().menu__link} ${"/shooters"===a&&i().menu__link_active}`,children:"Шутеры"})}),l.jsx("li",{className:i().menu__item,children:l.jsx(p(),{href:"/runners",className:`${i().menu__link} ${"/runners"===a&&i().menu__link_active}`,children:"Раннеры"})}),l.jsx("li",{className:i().menu__item,children:l.jsx(p(),{href:"/pixel-games",className:`${i().menu__link} ${"/pixel-games"===a&&i().menu__link_active}`,children:"Пиксельные"})}),l.jsx("li",{className:i().menu__item,children:l.jsx(p(),{href:"/tds",className:`${i().menu__link} ${"/tds"===a&&i().menu__link_active}`,children:"TDS"})})]}),l.jsx("div",{className:i().auth,children:t.isAuth?l.jsx("button",{className:i().auth__button,onClick:()=>{t.logout()},children:"Выйти"}):l.jsx("button",{className:i().auth__button,onClick:()=>{s(!0)},children:"Войти"})})]}),l.jsx(_,{isOpened:e,close:o}),l.jsx(u,{isOpened:e,close:o,children:l.jsx(d.AuthForm,{close:o})})]})};var g=t(2366),N=t.n(g);let v=()=>{let e=(0,f.usePathname)();return(0,l.jsxs)("footer",{className:N().footer,children:["/"===e?(0,l.jsxs)("p",{className:N().footer__logo,children:[l.jsx("span",{className:N()["footer__logo-name"],children:"pindie"}),l.jsx("span",{className:N()["footer__logo-copy"],children:", XXI век"})]}):(0,l.jsxs)(p(),{href:"/",className:N().footer__logo,children:[l.jsx("span",{className:N()["footer__logo-name"],children:"pindie"}),l.jsx("span",{className:N()["footer__logo-copy"],children:", XXI век"})]}),(0,l.jsxs)("ul",{className:N()["social-list"],children:[l.jsx("li",{className:N()["social-list__item"],children:l.jsx("a",{href:"",className:`button ${N()["social-list__link"]}`,children:"YT"})}),l.jsx("li",{className:N()["social-list__item"],children:l.jsx("a",{href:"",className:`button ${N()["social-list__link"]}`,children:"ВК"})}),l.jsx("li",{className:N()["social-list__item"],children:l.jsx("a",{href:"",className:`button ${N()["social-list__link"]}`,children:"TG"})})]})]})},k=e=>{let s=(0,x.o)();return(0,r.useEffect)(()=>{s.checkAuth()},[]),(0,l.jsxs)(l.Fragment,{children:[l.jsx(j,{}),e.children,l.jsx(v,{})]})}},6439:(e,s,t)=>{"use strict";t.d(s,{BJ:()=>n,BZ:()=>h,Fw:()=>u,Iq:()=>_,Ns:()=>p,ZB:()=>c,d8:()=>r,jo:()=>d,li:()=>a,v_:()=>m});let l=async e=>{try{let s=await fetch(e);if(200!==s.status)throw Error("Ошибка получения данных");return await s.json()}catch(e){return e}},r=e=>!(e instanceof Error),o=e=>{let s=JSON.stringify(e),t=JSON.parse(s=s.replaceAll("_id","id"));return{...t,category:t.categories}},i=e=>e.map(e=>o(e)),a=async(e,s)=>{let t=await l(`${e}/${s}`);return r(t)?o(t):t},n=async(e,s)=>{try{let t=await l(`${e}?categories.name=${s}`);if(!t.length)throw Error("Нет игр в категории");return r(t)?i(t):t}catch(e){return e}},_=async(e,s)=>{try{let t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(200!==t.status)throw Error("Ошибка авторизации");return await t.json()}catch(e){return e}},c=e=>{document.cookie=`jwt=${e}`,localStorage.setItem("jwt",e)},m=()=>{if(""===document.cookie)return localStorage.getItem("jwt");let e=document.cookie.split(";").find(e=>e.includes("jwt"));return e?e.split("=")[1]:null},u=()=>{document.cookie="jwt=;",localStorage.removeItem("jwt")},d=async(e,s)=>{try{let t=await fetch(e,{method:"GET",headers:{Authorization:`Bearer ${s}`}});if(200!==t.status)throw Error("Ошибка получения данных");return await t.json()}catch(e){return e}},h=(e,s)=>e.users.find(e=>e.id===e),p=async(e,s,t)=>{try{let l=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({users:t})});if(200!==l.status)throw Error("Ошибка голосования");return await l.json()}catch(e){return e}}},3196:(e,s,t)=>{"use strict";t.d(s,{H:()=>r});let l="https://goshapindieyp.nomoredomainswork.ru/api",r={games:`${l}/games`,auth:`${l}/auth/login`,me:`${l}//me`}},2796:(e,s,t)=>{"use strict";t.r(s),t.d(s,{AuthForm:()=>c});var l=t(5344),r=t(9190),o=t.n(r),i=t(3729),a=t(3196),n=t(6439),_=t(4402);let c=e=>{let s=(0,_.o)(),[t,r]=(0,i.useState)({email:"",password:""}),[c,m]=(0,i.useState)({status:null,text:null}),u=e=>{r({...t,[e.target.name]:e.target.value})},d=async e=>{e.preventDefault();let l=await (0,n.Iq)(a.H.auth,t);(0,n.d8)(l)?(s.login({...l,id:l._id},l.jwt),m({status:"success",text:"Вы авторизовались!"})):m({status:"error",text:"Неверные почта или пароль"})};return(0,i.useEffect)(()=>{let t;return s.user&&(t=setTimeout(()=>{m({status:null,text:null}),e.close()},1e3)),()=>clearTimeout(t)},[s.user]),(0,l.jsxs)("form",{onSubmit:d,className:o().form,children:[l.jsx("h2",{className:o().form__title,children:"Авторизация"}),(0,l.jsxs)("div",{className:o().form__fields,children:[(0,l.jsxs)("label",{className:o().form__field,children:[l.jsx("span",{className:o()["form__field-title"],children:"Email"}),l.jsx("input",{onInput:u,className:o()["form__field-input"],name:"email",type:"email",placeholder:"hello@world.com"})]}),(0,l.jsxs)("label",{className:o().form__field,children:[l.jsx("span",{className:o()["form__field-title"],children:"Пароль"}),l.jsx("input",{onInput:u,className:o()["form__field-input"],name:"password",type:"password",placeholder:"*********"})]})]}),c.status&&l.jsx("p",{className:o().form__message,children:c.text}),(0,l.jsxs)("div",{className:o().form__actions,children:[l.jsx("button",{className:o().form__reset,type:"reset",children:"Очистить"}),l.jsx("button",{className:o().form__submit,type:"submit",children:"Войти"})]})]})}},4402:(e,s,t)=>{"use strict";t.d(s,{o:()=>i});var l=t(3158),r=t(6439),o=t(3196);let i=(0,l.Ue)(e=>({isAuth:!1,user:null,token:null,login:(s,t)=>{e({isAuth:!0,user:s,token:t}),(0,r.ZB)(t)},logout:()=>{e({isAuth:!1,user:null,token:null}),(0,r.Fw)()},checkAuth:async()=>{let s=(0,r.v_)();if(s){let t=await (0,r.jo)(o.H.me,s);t._id?(e({isAuth:!0,user:{...t,id:t._id},token:s}),(0,r.ZB)(s)):(e({isAuth:!1,user:null,token:null}),(0,r.Fw)())}else e({isAuth:!1,user:null,token:null})}}))},9190:e=>{e.exports={form:"AuthForm_form__SAM4_",form__title:"AuthForm_form__title__bh8UF",form__fields:"AuthForm_form__fields__9NEi0",form__field:"AuthForm_form__field__8_VIY","form__field-title":"AuthForm_form__field-title__KiNGx","form__field-input":"AuthForm_form__field-input__rnkmC",form__message:"AuthForm_form__message__jeZGO",form__actions:"AuthForm_form__actions__QgxEI",form__reset:"AuthForm_form__reset__t8DRW",form__submit:"AuthForm_form__submit__pJzk2"}},2366:e=>{e.exports={footer:"Footer_footer__YgQC9",footer__logo:"Footer_footer__logo__Mmgbk","footer__logo-name":"Footer_footer__logo-name__OLRT5","social-list":"Footer_social-list__fwHMn","social-list__link":"Footer_social-list__link__x1pN7"}},708:e=>{e.exports={header:"Header_header__hrF4W",logo:"Header_logo__0h7JC",logo__image:"Header_logo__image__512Hy",menu:"Header_menu__8FCNf",menu__list:"Header_menu__list__8hP64",menu__item:"Header_menu__item__sjT_f",menu__link:"Header_menu__link__ZucvR",menu__link_active:"Header_menu__link_active__KYq02",auth:"Header_auth__XjkQJ",auth__button:"Header_auth__button__7tPqk",banner:"Header_banner__2OWzL"}},8125:e=>{e.exports={overlay:"Overlay_overlay__87APJ","overlay_is-opened":"Overlay_overlay_is-opened__QKW4v"}},2851:e=>{e.exports={popup:"Popup_popup__lJxRt","popup_is-opened":"Popup_popup_is-opened__R8NFO",close:"Popup_close__efpry","close-icon":"Popup_close-icon__QfKYp"}},3910:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>_});var l=t(5036),r=t(6843);let o=(0,r.createProxy)(String.raw`/home/student/pindie-frontend/app/App.jsx`),{__esModule:i,$$typeof:a}=o;o.default;let n=(0,r.createProxy)(String.raw`/home/student/pindie-frontend/app/App.jsx#App`);t(7272);let _={title:"Pindie",description:"Портал инди-игр от\xa0студентов Яндекс Практикума"};function c({children:e}){return l.jsx("html",{lang:"ru",children:l.jsx("body",{children:l.jsx(n,{children:e})})})}},7272:()=>{}};