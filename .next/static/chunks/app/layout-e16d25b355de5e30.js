(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{798:function(e,t,n){Promise.resolve().then(n.bind(n,2337)),Promise.resolve().then(n.t.bind(n,2445,23))},2337:function(e,t,n){"use strict";n.r(t),n.d(t,{App:function(){return y}});var s=n(7437),r=n(2265),o=n(7042),i=n.n(o),a=n(3744),l=n.n(a);let c=e=>(0,s.jsx)("div",{className:"".concat(l().overlay," ").concat(e.isOpened&&l()["overlay_is-opened"]),onClick:()=>e.close()});var u=n(4487),_=n.n(u);let m=e=>(0,s.jsxs)("div",{className:"".concat(_().popup," ").concat(e.isOpened&&_()["popup_is-opened"]),children:[(0,s.jsx)("button",{className:_().close,onClick:()=>e.close(),children:(0,s.jsx)("svg",{className:_()["close-icon"],xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 25",children:(0,s.jsx)("path",{fill:"#7E8292",d:"M15.3321 18.34c.04.0667.06.1533.06.26 0 .0933-.0467.1867-.14.28-.08.08-.18.12-.3.12h-4.5c-.36 0-.63332-.1533-.81999-.46l-1.74-2.68-1.66 2.68c-.18667.3067-.46.46-.82.46h-4.36c-.120001 0-.226667-.04-.320001-.12-.08-.0933-.12-.1867-.12-.28 0-.1067.02-.1933.06-.26l4.200001-6.5-3.78-6.18c-.04-.08-.06-.16667-.06-.26s.04-.18.12-.26c.09333-.09333.2-.14.32-.14h4.34c.37333 0 .65333.16667.84.5l1.4 2.44 1.52-2.44c.18667-.33333.46669-.5.83999-.5h4.14c.12 0 .22.04667.3.14.0933.08.14.17333.14.28 0 .09333-.02.17333-.06.24l-3.86 6.12 4.26 6.56Z"})})}),(0,s.jsx)("div",{className:_().content,children:e.children})]});var f=n(6009),d=n(1396),h=n.n(d),p=n(4033),j=n(3080);let x=()=>{let[e,t]=(0,r.useState)(!1),n=(0,j.o)(),o=()=>{t(!1)},a=(0,p.usePathname)();return(0,s.jsxs)("header",{className:i().header,children:["/"===a?(0,s.jsx)("span",{className:i().logo,children:(0,s.jsx)("img",{className:i().logo__image,src:"/images/logo.svg",alt:"Логотип Pindie"})}):(0,s.jsx)(h(),{href:"/",className:i().logo,children:(0,s.jsx)("img",{className:i().logo__image,src:"/images/logo.svg",alt:"Логотип Pindie"})}),(0,s.jsxs)("nav",{className:i().menu,children:[(0,s.jsxs)("ul",{className:i().menu__list,children:[(0,s.jsx)("li",{className:i().menu__item,children:(0,s.jsx)(h(),{href:"/new",className:"".concat(i().menu__link," ").concat("/new"===a&&i().menu__link_active),children:"Новинки"})}),(0,s.jsx)("li",{className:i().menu__item,children:(0,s.jsx)(h(),{href:"/popular",className:"".concat(i().menu__link," ").concat("/popular"===a&&i().menu__link_active),children:"Популярные"})}),(0,s.jsx)("li",{className:i().menu__item,children:(0,s.jsx)(h(),{href:"/shooters",className:"".concat(i().menu__link," ").concat("/shooters"===a&&i().menu__link_active),children:"Шутеры"})}),(0,s.jsx)("li",{className:i().menu__item,children:(0,s.jsx)(h(),{href:"/runners",className:"".concat(i().menu__link," ").concat("/runners"===a&&i().menu__link_active),children:"Раннеры"})}),(0,s.jsx)("li",{className:i().menu__item,children:(0,s.jsx)(h(),{href:"/pixel-games",className:"".concat(i().menu__link," ").concat("/pixel-games"===a&&i().menu__link_active),children:"Пиксельные"})}),(0,s.jsx)("li",{className:i().menu__item,children:(0,s.jsx)(h(),{href:"/tds",className:"".concat(i().menu__link," ").concat("/tds"===a&&i().menu__link_active),children:"TDS"})})]}),(0,s.jsx)("div",{className:i().auth,children:n.isAuth?(0,s.jsx)("button",{className:i().auth__button,onClick:()=>{n.logout()},children:"Выйти"}):(0,s.jsx)("button",{className:i().auth__button,onClick:()=>{t(!0)},children:"Войти"})})]}),(0,s.jsx)(c,{isOpened:e,close:o}),(0,s.jsx)(m,{isOpened:e,close:o,children:(0,s.jsx)(f.AuthForm,{close:o})})]})};var g=n(5617),v=n.n(g);let N=()=>{let e=(0,p.usePathname)();return(0,s.jsxs)("footer",{className:v().footer,children:["/"===e?(0,s.jsxs)("p",{className:v().footer__logo,children:[(0,s.jsx)("span",{className:v()["footer__logo-name"],children:"pindie"}),(0,s.jsx)("span",{className:v()["footer__logo-copy"],children:", XXI век"})]}):(0,s.jsxs)(h(),{href:"/",className:v().footer__logo,children:[(0,s.jsx)("span",{className:v()["footer__logo-name"],children:"pindie"}),(0,s.jsx)("span",{className:v()["footer__logo-copy"],children:", XXI век"})]}),(0,s.jsxs)("ul",{className:v()["social-list"],children:[(0,s.jsx)("li",{className:v()["social-list__item"],children:(0,s.jsx)("a",{href:"",className:"button ".concat(v()["social-list__link"]),children:"YT"})}),(0,s.jsx)("li",{className:v()["social-list__item"],children:(0,s.jsx)("a",{href:"",className:"button ".concat(v()["social-list__link"]),children:"ВК"})}),(0,s.jsx)("li",{className:v()["social-list__item"],children:(0,s.jsx)("a",{href:"",className:"button ".concat(v()["social-list__link"]),children:"TG"})})]})]})},y=e=>{let t=(0,j.o)();return(0,r.useEffect)(()=>{t.checkAuth()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x,{}),e.children,(0,s.jsx)(N,{})]})}},6493:function(e,t,n){"use strict";n.d(t,{BJ:function(){return l},BZ:function(){return d},Fw:function(){return m},Iq:function(){return c},Ns:function(){return h},ZB:function(){return u},d8:function(){return r},jo:function(){return f},li:function(){return a},v_:function(){return _}});let s=async e=>{try{let t=await fetch(e);if(200!==t.status)throw Error("Ошибка получения данных");return await t.json()}catch(e){return e}},r=e=>!(e instanceof Error),o=e=>{let t=JSON.stringify(e),n=JSON.parse(t=t.replaceAll("_id","id"));return{...n,category:n.categories}},i=e=>e.map(e=>o(e)),a=async(e,t)=>{let n=await s("".concat(e,"/").concat(t));return r(n)?o(n):n},l=async(e,t)=>{try{let n=await s("".concat(e,"?categories.name=").concat(t));if(!Array.isArray(n)||0===n.length)throw Error("Нет игр в категории");return r(n)?i(n):n}catch(e){return console.error(e),[]}},c=async(e,t)=>{try{let n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(200!==n.status)throw Error("Ошибка авторизации");return await n.json()}catch(e){return e}},u=e=>{document.cookie="jwt=".concat(e),localStorage.setItem("jwt",e)},_=()=>{if(""===document.cookie)return localStorage.getItem("jwt");let e=document.cookie.split(";").find(e=>e.includes("jwt"));return e?e.split("=")[1]:null},m=()=>{document.cookie="jwt=;",localStorage.removeItem("jwt")},f=async(e,t)=>{try{let n=await fetch(e,{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(200!==n.status)throw Error("Ошибка получения данных");return await n.json()}catch(e){return e}},d=(e,t)=>e.users.find(e=>e.id===e),h=async(e,t,n)=>{try{let s=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({users:n})});if(200!==s.status)throw Error("Ошибка голосования");return await s.json()}catch(e){return e}}},1370:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});let s="https://goshapindieyp.nomoredomainswork.ru/api",r={games:"".concat(s,"/games"),auth:"".concat(s,"/auth/login"),me:"".concat(s,"//me")}},6009:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthForm:function(){return u}});var s=n(7437),r=n(7965),o=n.n(r),i=n(2265),a=n(1370),l=n(6493),c=n(3080);let u=e=>{let t=(0,c.o)(),[n,r]=(0,i.useState)({email:"",password:""}),[u,_]=(0,i.useState)({status:null,text:null}),m=e=>{r({...n,[e.target.name]:e.target.value})},f=async e=>{e.preventDefault();let s=await (0,l.Iq)(a.H.auth,n);(0,l.d8)(s)?(t.login({...s,id:s._id},s.jwt),_({status:"success",text:"Вы авторизовались!"})):_({status:"error",text:"Неверные почта или пароль"})};return(0,i.useEffect)(()=>{let n;return t.user&&(n=setTimeout(()=>{_({status:null,text:null}),e.close()},1e3)),()=>clearTimeout(n)},[t.user]),(0,s.jsxs)("form",{onSubmit:f,className:o().form,children:[(0,s.jsx)("h2",{className:o().form__title,children:"Авторизация"}),(0,s.jsxs)("div",{className:o().form__fields,children:[(0,s.jsxs)("label",{className:o().form__field,children:[(0,s.jsx)("span",{className:o()["form__field-title"],children:"Email"}),(0,s.jsx)("input",{onInput:m,className:o()["form__field-input"],name:"identifier",type:"email",placeholder:"hello@world.com"})]}),(0,s.jsxs)("label",{className:o().form__field,children:[(0,s.jsx)("span",{className:o()["form__field-title"],children:"Пароль"}),(0,s.jsx)("input",{onInput:m,className:o()["form__field-input"],name:"email",type:"email",placeholder:"hello@world.com"})]})]}),u.status&&(0,s.jsx)("p",{className:o().form__message,children:u.text}),(0,s.jsxs)("div",{className:o().form__actions,children:[(0,s.jsx)("button",{className:o().form__reset,type:"reset",children:"Очистить"}),(0,s.jsx)("button",{className:o().form__submit,type:"submit",children:"Войти"})]})]})}},3080:function(e,t,n){"use strict";n.d(t,{o:function(){return h}});let s=e=>{let t;let n=new Set,s=(e,s)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=s?s:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,o={setState:s,getState:r,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(s,r,o);return o},r=e=>e?s(e):s;var o,i=n(2265),a=n(5401);let{useDebugValue:l}=i,{useSyncExternalStoreWithSelector:c}=a,u=!1,_=e=>e,m=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?r(e):e,n=(e,n)=>(function(e,t=_,n){n&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let s=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return l(s),s})(t,e,n);return Object.assign(n,t),n};var f=n(6493),d=n(1370);let h=(o=e=>({isAuth:!1,user:null,token:null,login:(t,n)=>{e({isAuth:!0,user:t,token:n}),(0,f.ZB)(n)},logout:()=>{e({isAuth:!1,user:null,token:null}),(0,f.Fw)()},checkAuth:async()=>{let t=(0,f.v_)();if(t){let n=await (0,f.jo)(d.H.me,t);n._id?(e({isAuth:!0,user:{...n,id:n._id},token:t}),(0,f.ZB)(t)):(e({isAuth:!1,user:null,token:null}),(0,f.Fw)())}else e({isAuth:!1,user:null,token:null})}}))?m(o):m},2445:function(){},7965:function(e){e.exports={form:"AuthForm_form__SAM4_",form__title:"AuthForm_form__title__bh8UF",form__fields:"AuthForm_form__fields__9NEi0",form__field:"AuthForm_form__field__8_VIY","form__field-title":"AuthForm_form__field-title__KiNGx","form__field-input":"AuthForm_form__field-input__rnkmC",form__message:"AuthForm_form__message__jeZGO",form__actions:"AuthForm_form__actions__QgxEI",form__reset:"AuthForm_form__reset__t8DRW",form__submit:"AuthForm_form__submit__pJzk2"}},5617:function(e){e.exports={footer:"Footer_footer__YgQC9",footer__logo:"Footer_footer__logo__Mmgbk","footer__logo-name":"Footer_footer__logo-name__OLRT5","social-list":"Footer_social-list__fwHMn","social-list__link":"Footer_social-list__link__x1pN7"}},7042:function(e){e.exports={header:"Header_header__hrF4W",logo:"Header_logo__0h7JC",logo__image:"Header_logo__image__512Hy",menu:"Header_menu__8FCNf",menu__list:"Header_menu__list__8hP64",menu__item:"Header_menu__item__sjT_f",menu__link:"Header_menu__link__ZucvR",menu__link_active:"Header_menu__link_active__KYq02",auth:"Header_auth__XjkQJ",auth__button:"Header_auth__button__7tPqk",banner:"Header_banner__2OWzL"}},3744:function(e){e.exports={overlay:"Overlay_overlay__87APJ","overlay_is-opened":"Overlay_overlay_is-opened__QKW4v"}},4487:function(e){e.exports={popup:"Popup_popup__lJxRt","popup_is-opened":"Popup_popup_is-opened__R8NFO",close:"Popup_close__efpry","close-icon":"Popup_close-icon__QfKYp"}},4033:function(e,t,n){e.exports=n(5313)},1853:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=n(2265),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=s.useState,i=s.useEffect,a=s.useLayoutEffect,l=s.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),s=o({inst:{value:n,getSnapshot:t}}),r=s[0].inst,u=s[1];return a(function(){r.value=n,r.getSnapshot=t,c(r)&&u({inst:r})},[e,n,t]),i(function(){return c(r)&&u({inst:r}),e(function(){c(r)&&u({inst:r})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:u},8704:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=n(2265),r=n(6272),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useSyncExternalStore,a=s.useRef,l=s.useEffect,c=s.useMemo,u=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var _=a(null);if(null===_.current){var m={hasValue:!1,value:null};_.current=m}else m=_.current;var f=i(e,(_=c(function(){function e(e){if(!l){if(l=!0,i=e,e=s(e),void 0!==r&&m.hasValue){var t=m.value;if(r(t,e))return a=t}return a=e}if(t=a,o(i,e))return t;var n=s(e);return void 0!==r&&r(t,n)?t:(i=e,a=n)}var i,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,s,r]))[0],_[1]);return l(function(){m.hasValue=!0,m.value=f},[f]),u(f),f}},6272:function(e,t,n){"use strict";e.exports=n(1853)},5401:function(e,t,n){"use strict";e.exports=n(8704)}},function(e){e.O(0,[176,971,938,744],function(){return e(e.s=798)}),_N_E=e.O()}]);